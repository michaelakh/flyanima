class SearchesController < ApplicationController
    require 'twitter_cldr'
    def index
        #Prepare data for Google QPX Api Call
    end
                
    def googleQPX
        respond_to do |format|
          format.json { 
        
        #test to see if an adult is going on the trip
        if params[:passenger][:adult]  == nil || params[:passenger][:adult]  == 0
            redirect_to root_uri, notice: "Please select atleast <b>1</b> adult for the trip"
        else
           @adult = params[:passenger][:adult] 
        end
        
        @child = params[:passenger][:child]
        
        #search for empty iata records (UPDATE, Must store these records as something to fix later on)
        if @depart_city_ita == "), "
          @depart_city_ita = params[:query].split(/\), /)
          #After finding empty iata records airport name, search other database for the iata name, update the main database and send it in googles api
        elsif @arrive_city_ita == "), "
          @depart_city_ita = params[:query].split(/,/)[0]
          #After finding empty iata records airport name, search other database for the iata name, update the main database and send it in googles api
        else
            #Prepare the Json Request
            i = 0;

            @slice = Array.new
        
            permitted_carriers = ["A3","RE","EI","SU","AR","AM","VV","AH","G9","BT","AB","SB","AC","TX","CA","UX","AF","AI","KM","NZ","FJ","TN","TS","FL","AS","AZ","NH","G4","HP","AA","W3","OR","OZ","5Y","OS","AV","9V","PG","BD","BA","SN","FB","9K","BW","CX","KX","5J","CI","MU","CZ","FC","DE","CO","CM","SS","OU","CU","CY","OK","DL","9H","U2","WK","MS","LY","EK","EY","BR","AY","7F","BE","F9","GA","4U","ZK","GF","HU","HA","QX","IB","FI","6E","7I","4O","JL","9W","B6","S2","JQ","KQ","IT","KL","KE","MN","KU","LA","XL","LP","LI","LO","LH","MN","MA","IG","MX","ME","YX","ZB","OM","DD","NW","DY","OA","WY","PC","PR","NI","QF","QR","AT","RJ","FR","S7","RZ","SK","SP","SV","CB","SQ","NE","5P","OO","XZ","WN","JK","SG","NK","UL","SY","LX","TA","T0","JJ","TP","RO","TG","BY","UN","HV","TU","TK","UA","U6","US","HY","SA","VN","NN","VX","VS","VA","V2","Y4","VY","WS","W6","SE","Y0","ZJ"]
        
            params[:query].each do |x, y|
                i = i + 1
                j = i + 1
                origin = ""

                #Check if origin was passed in
                if y["query_#{i}_1"] != nil
                    origin = y["query_#{i}_1"].split(/, \(/)[1][0..2]
                    @origin = origin
                else
                    redirect_to root_uri, notice: "Please complete the 'coming from' field"
                end

                #Check if a destination was passed in
                if y["query_#{i}_2"] != nil
                    destination = y["query_#{i}_2"].split(/, \(/)[1][0..2]
                    @destination = destination
                else
                    redirect_to root_uri, notice: "Please complete the 'going to' field"
                end
                
                @origin_tz = Airport.where(iata: @origin).first
                @destination_tz = Airport.where(iata: @destination).first
                #check if different dates were set (OHIOZE AKHAZEMEA UPDATE THIS)
                if params["query_#{i}_date_l"] == params["query_#{j}_date_r"]

                    redirect_to root_url, notice: "You can't leave and return on the same day"
                end  
                if params["query_#{i}_date_l"] != nil

                    date_leave = params["query_#{i}_date_l"]
                    @departure_first = params["query_1_date_l"]
                    @departure_last = date_leave
                else
                    redirect_to root_uri, notice: "Please set a leaving date"
                end

                @slice.push "origin" => origin, "destination" => destination, "date" => date_leave, "permittedCarrier" => permitted_carriers

                if params["query_#{j}_date_r"] != nil
                    date_return = params["query_#{j}_date_r"]

                    @slice.push "origin" => destination, "destination" => origin, "date" => date_return, "permittedCarrier" => permitted_carriers

                    @departure_last = date_return
                end
            end
            @request = {}
            @request["request"] = {}
            @request["request"]["slice"] = {}
            @request["request"]["slice"] = @slice
            @request["request"].store("passengers", ["adultCount" => @adult, "childCount" => @child]) 
            @request["request"].store("solutions", 100)
            @request["request"].store("refundable", false)
               
            @json_request = @request
            @httprequest = HTTP.post('https://www.googleapis.com/qpxExpress/v1/trips/search?key=AIzaSyCizuMFFkD3mMU1Ng9p6nJ0kaT_7b0_5Dw', :json => @json_request)
                    
               #@httprequest ={"kind": "qpxExpress#tripsSearch","trips": {"kind": "qpxexpress#tripOptions","requestId": "fww1TF94h3RJeDLvd0PrX5","data": {"kind": "qpxexpress#data"}}}.to_json
        

                @httprequest = {"kind"=>"qpxExpress#tripsSearch", "trips"=>{"kind"=>"qpxexpress#tripOptions", "requestId"=>"vvRYMsNo6XuTh958V0Pr8r", "data"=>{"kind"=>"qpxexpress#data", "airport"=>[{"kind"=>"qpxexpress#airportData", "code"=>"AMS", "city"=>"AMS", "name"=>"Amsterdam Schiphol Airport"}, {"kind"=>"qpxexpress#airportData", "code"=>"DUB", "city"=>"DUB", "name"=>"Dublin International"}, {"kind"=>"qpxexpress#airportData", "code"=>"LGW", "city"=>"LON", "name"=>"London Gatwick"}], "city"=>[{"kind"=>"qpxexpress#cityData", "code"=>"AMS", "name"=>"Amsterdam"}, {"kind"=>"qpxexpress#cityData", "code"=>"DUB", "name"=>"Dublin"}, {"kind"=>"qpxexpress#cityData", "code"=>"LON", "name"=>"London"}], "aircraft"=>[{"kind"=>"qpxexpress#aircraftData", "code"=>"319", "name"=>"Airbus A319"}, {"kind"=>"qpxexpress#aircraftData", "code"=>"320", "name"=>"Airbus A320"}], "tax"=>[{"kind"=>"qpxexpress#taxData", "id"=>"UP_001", "name"=>"Ireland Passenger Charge"}, {"kind"=>"qpxexpress#taxData", "id"=>"UB_001", "name"=>"United Kingdom Passenger Service Charge Departures"}, {"kind"=>"qpxexpress#taxData", "id"=>"YQ_F", "name"=>"EI YQ surcharge"}, {"kind"=>"qpxexpress#taxData", "id"=>"CJ_001", "name"=>"Netherlands Security Service Charge"}, {"kind"=>"qpxexpress#taxData", "id"=>"RN_001", "name"=>"Netherlands Passenger Service Charge"}, {"kind"=>"qpxexpress#taxData", "id"=>"YR_I", "name"=>"EI YR surcharge"}, {"kind"=>"qpxexpress#taxData", "id"=>"GB_001", "name"=>"United Kingdom Air Passenger Duty Apd"}], "carrier"=>[{"kind"=>"qpxexpress#carrierData", "code"=>"BA", "name"=>"British Airways"}, {"kind"=>"qpxexpress#carrierData", "code"=>"EI", "name"=>"Aer Lingus Limited"}]}, "tripOption"=>[{"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP124.12", "id"=>"QO8hXP39OK0R0Al3Qh7jCO002", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2758"}, "id"=>"GvLVbadz6sRz0Tm-", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LMPu8zLcve64IFp6", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:05+01:00", "departureTime"=>"2017-01-25T07:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>75, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>75, "flight"=>{"carrier"=>"BA", "number"=>"2765"}, "id"=>"GAg5sSIwPNSsk+E4", "cabin"=>"COACH", "bookingCode"=>"O", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LDQcfhxJ1wVUITY3", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T21:30+00:00", "departureTime"=>"2017-02-10T21:15+01:00", "origin"=>"AMS", "destination"=>"LGW", "destinationTerminal"=>"S", "duration"=>75, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2K"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"A7LXUEhB3Md9Kw/l9WbR7jnDLPDDj0Tnj6JAWvfv45xU", "carrier"=>"BA", "origin"=>"AMS", "destination"=>"LON", "basisCode"=>"OLV2K"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"A7LXUEhB3Md9Kw/l9WbR7jnDLPDDj0Tnj6JAWvfv45xU", "segmentId"=>"GAg5sSIwPNSsk+E4"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "segmentId"=>"GvLVbadz6sRz0Tm-"}], "baseFareTotal"=>"GBP78.00", "saleFareTotal"=>"GBP78.00", "saleTaxTotal"=>"GBP46.12", "saleTotal"=>"GBP124.12", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP11.30"}], "fareCalculation"=>"LON BA AMS 63.94NLV2K BA LON 34.82OLV2K NUC 98.76 END ROE 0.789732 FARE GBP 78.00 XT 13.00GB 12.72UB 9.10CJ 11.30RN", "latestTicketingTime"=>"2017-01-24T23:59-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP124.12", "id"=>"QO8hXP39OK0R0Al3Qh7jCO003", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2762"}, "id"=>"GCmiUSMYzd5c0ht8", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>6, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"L3WZm1Awq8DwBojO", "aircraft"=>"319", "arrivalTime"=>"2017-01-25T18:05+01:00", "departureTime"=>"2017-01-25T15:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2759"}, "id"=>"Gy1jINNnxuT0hyHI", "cabin"=>"COACH", "bookingCode"=>"O", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LZplz2G+t8WiHdsl", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T11:10+00:00", "departureTime"=>"2017-02-10T10:50+01:00", "origin"=>"AMS", "destination"=>"LGW", "destinationTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2K"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"A7LXUEhB3Md9Kw/l9WbR7jnDLPDDj0Tnj6JAWvfv45xU", "carrier"=>"BA", "origin"=>"AMS", "destination"=>"LON", "basisCode"=>"OLV2K"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"A7LXUEhB3Md9Kw/l9WbR7jnDLPDDj0Tnj6JAWvfv45xU", "segmentId"=>"Gy1jINNnxuT0hyHI"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "segmentId"=>"GCmiUSMYzd5c0ht8"}], "baseFareTotal"=>"GBP78.00", "saleFareTotal"=>"GBP78.00", "saleTaxTotal"=>"GBP46.12", "saleTotal"=>"GBP124.12", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP11.30"}], "fareCalculation"=>"LON BA AMS 63.94NLV2K BA LON 34.82OLV2K NUC 98.76 END ROE 0.789732 FARE GBP 78.00 XT 13.00GB 12.72UB 9.10CJ 11.30RN", "latestTicketingTime"=>"2017-01-24T23:59-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP124.12", "id"=>"QO8hXP39OK0R0Al3Qh7jCO001", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2762"}, "id"=>"GCmiUSMYzd5c0ht8", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>6, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"L3WZm1Awq8DwBojO", "aircraft"=>"319", "arrivalTime"=>"2017-01-25T18:05+01:00", "departureTime"=>"2017-01-25T15:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>75, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>75, "flight"=>{"carrier"=>"BA", "number"=>"2765"}, "id"=>"GAg5sSIwPNSsk+E4", "cabin"=>"COACH", "bookingCode"=>"O", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LDQcfhxJ1wVUITY3", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T21:30+00:00", "departureTime"=>"2017-02-10T21:15+01:00", "origin"=>"AMS", "destination"=>"LGW", "destinationTerminal"=>"S", "duration"=>75, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2K"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"A7LXUEhB3Md9Kw/l9WbR7jnDLPDDj0Tnj6JAWvfv45xU", "carrier"=>"BA", "origin"=>"AMS", "destination"=>"LON", "basisCode"=>"OLV2K"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"A7LXUEhB3Md9Kw/l9WbR7jnDLPDDj0Tnj6JAWvfv45xU", "segmentId"=>"GAg5sSIwPNSsk+E4"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "segmentId"=>"GCmiUSMYzd5c0ht8"}], "baseFareTotal"=>"GBP78.00", "saleFareTotal"=>"GBP78.00", "saleTaxTotal"=>"GBP46.12", "saleTotal"=>"GBP124.12", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP11.30"}], "fareCalculation"=>"LON BA AMS 63.94NLV2K BA LON 34.82OLV2K NUC 98.76 END ROE 0.789732 FARE GBP 78.00 XT 13.00GB 12.72UB 9.10CJ 11.30RN", "latestTicketingTime"=>"2017-01-24T23:59-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP124.12", "id"=>"QO8hXP39OK0R0Al3Qh7jCO004", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2758"}, "id"=>"GvLVbadz6sRz0Tm-", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LMPu8zLcve64IFp6", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:05+01:00", "departureTime"=>"2017-01-25T07:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2759"}, "id"=>"Gy1jINNnxuT0hyHI", "cabin"=>"COACH", "bookingCode"=>"O", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LZplz2G+t8WiHdsl", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T11:10+00:00", "departureTime"=>"2017-02-10T10:50+01:00", "origin"=>"AMS", "destination"=>"LGW", "destinationTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2K"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"A7LXUEhB3Md9Kw/l9WbR7jnDLPDDj0Tnj6JAWvfv45xU", "carrier"=>"BA", "origin"=>"AMS", "destination"=>"LON", "basisCode"=>"OLV2K"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"A7LXUEhB3Md9Kw/l9WbR7jnDLPDDj0Tnj6JAWvfv45xU", "segmentId"=>"Gy1jINNnxuT0hyHI"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "segmentId"=>"GvLVbadz6sRz0Tm-"}], "baseFareTotal"=>"GBP78.00", "saleFareTotal"=>"GBP78.00", "saleTaxTotal"=>"GBP46.12", "saleTotal"=>"GBP124.12", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP11.30"}], "fareCalculation"=>"LON BA AMS 63.94NLV2K BA LON 34.82OLV2K NUC 98.76 END ROE 0.789732 FARE GBP 78.00 XT 13.00GB 12.72UB 9.10CJ 11.30RN", "latestTicketingTime"=>"2017-01-24T23:59-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP136.12", "id"=>"QO8hXP39OK0R0Al3Qh7jCO005", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2762"}, "id"=>"GCmiUSMYzd5c0ht8", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>6, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"L3WZm1Awq8DwBojO", "aircraft"=>"319", "arrivalTime"=>"2017-01-25T18:05+01:00", "departureTime"=>"2017-01-25T15:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>75, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>75, "flight"=>{"carrier"=>"BA", "number"=>"2761"}, "id"=>"Gp21tnu2Nd9gC9fl", "cabin"=>"COACH", "bookingCode"=>"Q", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LYLAvX3fmansNsi9", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T15:00+00:00", "departureTime"=>"2017-02-10T14:45+01:00", "origin"=>"AMS", "destination"=>"LGW", "destinationTerminal"=>"S", "duration"=>75, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2K"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AVbw++V+spTSmpCOp2V69ItTKUVMig7ukTEURub3MmIY", "carrier"=>"BA", "origin"=>"AMS", "destination"=>"LON", "basisCode"=>"QLV2K"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AVbw++V+spTSmpCOp2V69ItTKUVMig7ukTEURub3MmIY", "segmentId"=>"Gp21tnu2Nd9gC9fl"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "segmentId"=>"GCmiUSMYzd5c0ht8"}], "baseFareTotal"=>"GBP90.00", "saleFareTotal"=>"GBP90.00", "saleTaxTotal"=>"GBP46.12", "saleTotal"=>"GBP136.12", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP11.30"}], "fareCalculation"=>"LON BA AMS 63.94NLV2K BA LON 50.01QLV2K NUC 113.95 END ROE 0.789732 FARE GBP 90.00 XT 13.00GB 12.72UB 9.10CJ 11.30RN", "latestTicketingTime"=>"2017-01-24T23:59-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP136.12", "id"=>"QO8hXP39OK0R0Al3Qh7jCO006", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2758"}, "id"=>"GvLVbadz6sRz0Tm-", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LMPu8zLcve64IFp6", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:05+01:00", "departureTime"=>"2017-01-25T07:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>75, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>75, "flight"=>{"carrier"=>"BA", "number"=>"2761"}, "id"=>"Gp21tnu2Nd9gC9fl", "cabin"=>"COACH", "bookingCode"=>"Q", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LYLAvX3fmansNsi9", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T15:00+00:00", "departureTime"=>"2017-02-10T14:45+01:00", "origin"=>"AMS", "destination"=>"LGW", "destinationTerminal"=>"S", "duration"=>75, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2K"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AVbw++V+spTSmpCOp2V69ItTKUVMig7ukTEURub3MmIY", "carrier"=>"BA", "origin"=>"AMS", "destination"=>"LON", "basisCode"=>"QLV2K"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "segmentId"=>"GvLVbadz6sRz0Tm-"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AVbw++V+spTSmpCOp2V69ItTKUVMig7ukTEURub3MmIY", "segmentId"=>"Gp21tnu2Nd9gC9fl"}], "baseFareTotal"=>"GBP90.00", "saleFareTotal"=>"GBP90.00", "saleTaxTotal"=>"GBP46.12", "saleTotal"=>"GBP136.12", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP11.30"}], "fareCalculation"=>"LON BA AMS 63.94NLV2K BA LON 50.01QLV2K NUC 113.95 END ROE 0.789732 FARE GBP 90.00 XT 13.00GB 12.72UB 9.10CJ 11.30RN", "latestTicketingTime"=>"2017-01-24T23:59-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP161.12", "id"=>"QO8hXP39OK0R0Al3Qh7jCO007", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2762"}, "id"=>"GCmiUSMYzd5c0ht8", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>6, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"L3WZm1Awq8DwBojO", "aircraft"=>"319", "arrivalTime"=>"2017-01-25T18:05+01:00", "departureTime"=>"2017-01-25T15:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>75, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>75, "flight"=>{"carrier"=>"BA", "number"=>"2763"}, "id"=>"G7Bv8GPe2AEd1QRv", "cabin"=>"COACH", "bookingCode"=>"V", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"Li-lIIc67iAxGvxy", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T19:05+00:00", "departureTime"=>"2017-02-10T18:50+01:00", "origin"=>"AMS", "destination"=>"LGW", "destinationTerminal"=>"S", "duration"=>75, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2K"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"ASrknc/CqyphodKuls+OXNwlx75aSIW5NfWWCodGnAcs", "carrier"=>"BA", "origin"=>"AMS", "destination"=>"LON", "basisCode"=>"VLV2K"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"ASrknc/CqyphodKuls+OXNwlx75aSIW5NfWWCodGnAcs", "segmentId"=>"G7Bv8GPe2AEd1QRv"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "segmentId"=>"GCmiUSMYzd5c0ht8"}], "baseFareTotal"=>"GBP115.00", "saleFareTotal"=>"GBP115.00", "saleTaxTotal"=>"GBP46.12", "saleTotal"=>"GBP161.12", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP11.30"}], "fareCalculation"=>"LON BA AMS 63.94NLV2K BA LON 82.30VLV2K NUC 146.24 END ROE 0.789732 FARE GBP 115.00 XT 13.00GB 12.72UB 9.10CJ 11.30RN", "latestTicketingTime"=>"2017-01-24T23:59-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP161.12", "id"=>"QO8hXP39OK0R0Al3Qh7jCO008", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2758"}, "id"=>"GvLVbadz6sRz0Tm-", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LMPu8zLcve64IFp6", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:05+01:00", "departureTime"=>"2017-01-25T07:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>75, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>75, "flight"=>{"carrier"=>"BA", "number"=>"2763"}, "id"=>"G7Bv8GPe2AEd1QRv", "cabin"=>"COACH", "bookingCode"=>"V", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"Li-lIIc67iAxGvxy", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T19:05+00:00", "departureTime"=>"2017-02-10T18:50+01:00", "origin"=>"AMS", "destination"=>"LGW", "destinationTerminal"=>"S", "duration"=>75, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2K"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"ASrknc/CqyphodKuls+OXNwlx75aSIW5NfWWCodGnAcs", "carrier"=>"BA", "origin"=>"AMS", "destination"=>"LON", "basisCode"=>"VLV2K"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"ASrknc/CqyphodKuls+OXNwlx75aSIW5NfWWCodGnAcs", "segmentId"=>"G7Bv8GPe2AEd1QRv"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "segmentId"=>"GvLVbadz6sRz0Tm-"}], "baseFareTotal"=>"GBP115.00", "saleFareTotal"=>"GBP115.00", "saleTaxTotal"=>"GBP46.12", "saleTotal"=>"GBP161.12", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP11.30"}], "fareCalculation"=>"LON BA AMS 63.94NLV2K BA LON 82.30VLV2K NUC 146.24 END ROE 0.789732 FARE GBP 115.00 XT 13.00GB 12.72UB 9.10CJ 11.30RN", "latestTicketingTime"=>"2017-01-24T23:59-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP201.52", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00A", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2758"}, "id"=>"GvLVbadz6sRz0Tm-", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LMPu8zLcve64IFp6", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:05+01:00", "departureTime"=>"2017-01-25T07:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>385, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"EI", "number"=>"605"}, "id"=>"G+Oe2mNHX3l+9YzJ", "cabin"=>"COACH", "bookingCode"=>"W", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"La3mTtN+gh06xOgP", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T11:40+00:00", "departureTime"=>"2017-02-10T11:00+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>200}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"EI", "number"=>"240"}, "id"=>"GFKGbeUgZV9JT7B1", "cabin"=>"COACH", "bookingCode"=>"A", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"Ll+slATu5FAWPFdS", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T16:25+00:00", "departureTime"=>"2017-02-10T15:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"A3wIqXBNUJNKx9dscccd1YumLuP+U8V+aYH6DHOwBvOY", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2KO"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"Awd3L/pxIC8dH6y9+OywzwCpaqiU6N8JVmWVnqGlSB0A", "carrier"=>"EI", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"WEUOW17G"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AQu3tZ6+RNoJzvqMPqtUf8h5INolMWr0dJAIKyx9Zuco", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"AOW26GDS"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AQu3tZ6+RNoJzvqMPqtUf8h5INolMWr0dJAIKyx9Zuco", "segmentId"=>"GFKGbeUgZV9JT7B1"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"A3wIqXBNUJNKx9dscccd1YumLuP+U8V+aYH6DHOwBvOY", "segmentId"=>"GvLVbadz6sRz0Tm-"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"Awd3L/pxIC8dH6y9+OywzwCpaqiU6N8JVmWVnqGlSB0A", "segmentId"=>"G+Oe2mNHX3l+9YzJ"}], "baseFareTotal"=>"GBP87.00", "saleFareTotal"=>"GBP87.00", "saleTaxTotal"=>"GBP114.52", "saleTotal"=>"GBP201.52", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP26.20"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YR_I", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YR", "salePrice"=>"GBP20.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP14.70"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP18.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LON BA AMS 59.51NLV2KO EI X/DUB 26.72WEUOW17G EI LGW 23.52AOW26GDS NUC 109.75 END ROE 0.789732 FARE GBP 87.00 XT 13.00GB 12.72UB 9.10CJ 18.80RN 14.70UP 26.20YQ 20.00YR", "latestTicketingTime"=>"2017-01-22T16:01-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP201.52", "id"=>"QO8hXP39OK0R0Al3Qh7jCO009", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2762"}, "id"=>"GCmiUSMYzd5c0ht8", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>6, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"L3WZm1Awq8DwBojO", "aircraft"=>"319", "arrivalTime"=>"2017-01-25T18:05+01:00", "departureTime"=>"2017-01-25T15:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>385, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"EI", "number"=>"605"}, "id"=>"G+Oe2mNHX3l+9YzJ", "cabin"=>"COACH", "bookingCode"=>"W", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"La3mTtN+gh06xOgP", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T11:40+00:00", "departureTime"=>"2017-02-10T11:00+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>200}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"EI", "number"=>"240"}, "id"=>"GFKGbeUgZV9JT7B1", "cabin"=>"COACH", "bookingCode"=>"A", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"Ll+slATu5FAWPFdS", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T16:25+00:00", "departureTime"=>"2017-02-10T15:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"A3wIqXBNUJNKx9dscccd1YumLuP+U8V+aYH6DHOwBvOY", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2KO"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"Awd3L/pxIC8dH6y9+OywzwCpaqiU6N8JVmWVnqGlSB0A", "carrier"=>"EI", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"WEUOW17G"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AQu3tZ6+RNoJzvqMPqtUf8h5INolMWr0dJAIKyx9Zuco", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"AOW26GDS"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AQu3tZ6+RNoJzvqMPqtUf8h5INolMWr0dJAIKyx9Zuco", "segmentId"=>"GFKGbeUgZV9JT7B1"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"Awd3L/pxIC8dH6y9+OywzwCpaqiU6N8JVmWVnqGlSB0A", "segmentId"=>"G+Oe2mNHX3l+9YzJ"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"A3wIqXBNUJNKx9dscccd1YumLuP+U8V+aYH6DHOwBvOY", "segmentId"=>"GCmiUSMYzd5c0ht8"}], "baseFareTotal"=>"GBP87.00", "saleFareTotal"=>"GBP87.00", "saleTaxTotal"=>"GBP114.52", "saleTotal"=>"GBP201.52", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP26.20"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YR_I", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YR", "salePrice"=>"GBP20.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP14.70"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP18.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LON BA AMS 59.51NLV2KO EI X/DUB 26.72WEUOW17G EI LGW 23.52AOW26GDS NUC 109.75 END ROE 0.789732 FARE GBP 87.00 XT 13.00GB 12.72UB 9.10CJ 18.80RN 14.70UP 26.20YQ 20.00YR", "latestTicketingTime"=>"2017-01-22T16:01-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP219.52", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00C", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2758"}, "id"=>"GvLVbadz6sRz0Tm-", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LMPu8zLcve64IFp6", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:05+01:00", "departureTime"=>"2017-01-25T07:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>385, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"BA", "number"=>"8965"}, "id"=>"GZsDRhFT+v4qbtG5", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LQUEsxBRkbcXPBO1", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T11:40+00:00", "departureTime"=>"2017-02-10T11:00+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "operatingDisclosure"=>"OPERATED BY AER LINGUS", "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>200}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"BA", "number"=>"5910"}, "id"=>"G2M0G+zhdsLva5me", "cabin"=>"COACH", "bookingCode"=>"O", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LORAP4Tq-toxz+7Y", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T16:25+00:00", "departureTime"=>"2017-02-10T15:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "operatingDisclosure"=>"OPERATED BY AER LINGUS", "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2K"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AohSFBKdd4zqO+3/Vu9z4v73m1iRIg5WjEtb0iDIIfec", "carrier"=>"BA", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"NLEIH"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AwwH3otyPP45MjOUWzh9q2CZNPOB4UWqNZiyIt2XSu9g", "carrier"=>"BA", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"OLEIKO"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AohSFBKdd4zqO+3/Vu9z4v73m1iRIg5WjEtb0iDIIfec", "segmentId"=>"GZsDRhFT+v4qbtG5"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AwwH3otyPP45MjOUWzh9q2CZNPOB4UWqNZiyIt2XSu9g", "segmentId"=>"G2M0G+zhdsLva5me"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "segmentId"=>"GvLVbadz6sRz0Tm-"}], "baseFareTotal"=>"GBP163.00", "saleFareTotal"=>"GBP163.00", "saleTaxTotal"=>"GBP56.52", "saleTotal"=>"GBP219.52", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP10.40"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP11.30"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LON BA AMS 63.94NLV2K BA X/DUB 83.93NLEIH BA LON 58.24OLEIKO NUC 206.11 END ROE 0.789732 FARE GBP 163.00 XT 13.00GB 12.72UB 9.10CJ 11.30RN 10.40UP", "latestTicketingTime"=>"2017-01-24T23:59-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP219.52", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00B", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>80, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"BA", "number"=>"2762"}, "id"=>"GCmiUSMYzd5c0ht8", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>6, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"L3WZm1Awq8DwBojO", "aircraft"=>"319", "arrivalTime"=>"2017-01-25T18:05+01:00", "departureTime"=>"2017-01-25T15:45+00:00", "origin"=>"LGW", "destination"=>"AMS", "originTerminal"=>"S", "duration"=>80, "mileage"=>226, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>385, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"BA", "number"=>"8965"}, "id"=>"GZsDRhFT+v4qbtG5", "cabin"=>"COACH", "bookingCode"=>"N", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LQUEsxBRkbcXPBO1", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T11:40+00:00", "departureTime"=>"2017-02-10T11:00+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "operatingDisclosure"=>"OPERATED BY AER LINGUS", "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>200}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"BA", "number"=>"5910"}, "id"=>"G2M0G+zhdsLva5me", "cabin"=>"COACH", "bookingCode"=>"O", "bookingCodeCount"=>9, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LORAP4Tq-toxz+7Y", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T16:25+00:00", "departureTime"=>"2017-02-10T15:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "operatingDisclosure"=>"OPERATED BY AER LINGUS", "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "carrier"=>"BA", "origin"=>"LON", "destination"=>"AMS", "basisCode"=>"NLV2K"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AohSFBKdd4zqO+3/Vu9z4v73m1iRIg5WjEtb0iDIIfec", "carrier"=>"BA", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"NLEIH"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AwwH3otyPP45MjOUWzh9q2CZNPOB4UWqNZiyIt2XSu9g", "carrier"=>"BA", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"OLEIKO"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AohSFBKdd4zqO+3/Vu9z4v73m1iRIg5WjEtb0iDIIfec", "segmentId"=>"GZsDRhFT+v4qbtG5"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AwwH3otyPP45MjOUWzh9q2CZNPOB4UWqNZiyIt2XSu9g", "segmentId"=>"G2M0G+zhdsLva5me"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AzAYTMjA5JvhGWF0m5bHnI7ZLJhrsq7BrQYFdFxX77+A", "segmentId"=>"GCmiUSMYzd5c0ht8"}], "baseFareTotal"=>"GBP163.00", "saleFareTotal"=>"GBP163.00", "saleTaxTotal"=>"GBP56.52", "saleTotal"=>"GBP219.52", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP10.40"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP11.30"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LON BA AMS 63.94NLV2K BA X/DUB 83.93NLEIH BA LON 58.24OLEIKO NUC 206.11 END ROE 0.789732 FARE GBP 163.00 XT 13.00GB 12.72UB 9.10CJ 11.30RN 10.40UP", "latestTicketingTime"=>"2017-01-24T23:59-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP317.04", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00D", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>365, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"EI", "number"=>"231"}, "id"=>"GbxJLqyQsqbYzotL", "cabin"=>"COACH", "bookingCode"=>"R", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LAxFn7qdXdc4+wMS", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:10+00:00", "departureTime"=>"2017-01-25T08:50+00:00", "origin"=>"LGW", "destination"=>"DUB", "originTerminal"=>"S", "destinationTerminal"=>"2", "duration"=>80, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>175}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>110, "flight"=>{"carrier"=>"EI", "number"=>"608"}, "id"=>"GJIHgoSz7lP-yX5C", "cabin"=>"COACH", "bookingCode"=>"E", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LmKGKTqx14lyaV+F", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T15:55+01:00", "departureTime"=>"2017-01-25T13:05+00:00", "origin"=>"DUB", "destination"=>"AMS", "originTerminal"=>"2", "duration"=>110, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>385, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"EI", "number"=>"605"}, "id"=>"G+Oe2mNHX3l+9YzJ", "cabin"=>"COACH", "bookingCode"=>"W", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"La3mTtN+gh06xOgP", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T11:40+00:00", "departureTime"=>"2017-02-10T11:00+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>200}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"EI", "number"=>"240"}, "id"=>"GFKGbeUgZV9JT7B1", "cabin"=>"COACH", "bookingCode"=>"A", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"3", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"Ll+slATu5FAWPFdS", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T16:25+00:00", "departureTime"=>"2017-02-10T15:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "carrier"=>"EI", "origin"=>"LON", "destination"=>"DUB", "basisCode"=>"RUK26GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"AMS", "basisCode"=>"EOW17GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"Awd3L/pxIC8dH6y9+OywzwCpaqiU6N8JVmWVnqGlSB0A", "carrier"=>"EI", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"WEUOW17G"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AQu3tZ6+RNoJzvqMPqtUf8h5INolMWr0dJAIKyx9Zuco", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"AOW26GDS"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "segmentId"=>"GJIHgoSz7lP-yX5C"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "segmentId"=>"GbxJLqyQsqbYzotL"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AQu3tZ6+RNoJzvqMPqtUf8h5INolMWr0dJAIKyx9Zuco", "segmentId"=>"GFKGbeUgZV9JT7B1"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"Awd3L/pxIC8dH6y9+OywzwCpaqiU6N8JVmWVnqGlSB0A", "segmentId"=>"G+Oe2mNHX3l+9YzJ"}], "baseFareTotal"=>"GBP147.00", "saleFareTotal"=>"GBP147.00", "saleTaxTotal"=>"GBP170.04", "saleTotal"=>"GBP317.04", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP19.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP42.70"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YR_I", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YR", "salePrice"=>"GBP40.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP13.92"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP18.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LGW EI X/DUB 48.11RUK26GDS EI AMS 87.67EOW17GDS EI X/DUB 26.72WEUOW17G EI LGW 23.52AOW26GDS NUC 186.02 END ROE 0.789732 FARE GBP 147.00 XT 13.00GB 12.72UB 19.80UP 9.10CJ 18.80RN 56.62YQ 40.00YR", "latestTicketingTime"=>"2017-01-22T16:01-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP323.84", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00G", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>365, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"EI", "number"=>"231"}, "id"=>"GbxJLqyQsqbYzotL", "cabin"=>"COACH", "bookingCode"=>"R", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LAxFn7qdXdc4+wMS", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:10+00:00", "departureTime"=>"2017-01-25T08:50+00:00", "origin"=>"LGW", "destination"=>"DUB", "originTerminal"=>"S", "destinationTerminal"=>"2", "duration"=>80, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>175}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>110, "flight"=>{"carrier"=>"EI", "number"=>"608"}, "id"=>"GJIHgoSz7lP-yX5C", "cabin"=>"COACH", "bookingCode"=>"E", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LmKGKTqx14lyaV+F", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T15:55+01:00", "departureTime"=>"2017-01-25T13:05+00:00", "origin"=>"DUB", "destination"=>"AMS", "originTerminal"=>"2", "duration"=>110, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>505, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"EI", "number"=>"605"}, "id"=>"G+Oe2mNHX3l+9YzJ", "cabin"=>"COACH", "bookingCode"=>"W", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"La3mTtN+gh06xOgP", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T11:40+00:00", "departureTime"=>"2017-02-10T11:00+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>320}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"EI", "number"=>"244"}, "id"=>"GwE+tP-0Sa5KkoTj", "cabin"=>"COACH", "bookingCode"=>"Z", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"3", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LP6oW49z0Rj+y8r1", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T18:25+00:00", "departureTime"=>"2017-02-10T17:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "carrier"=>"EI", "origin"=>"LON", "destination"=>"DUB", "basisCode"=>"RUK26GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"AMS", "basisCode"=>"EOW17GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"Awd3L/pxIC8dH6y9+OywzwCpaqiU6N8JVmWVnqGlSB0A", "carrier"=>"EI", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"WEUOW17G"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"ABiknAeC9gYUwx/rrNx7beE0gC08VqaAwtapgSOM9R4E", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"ZOW26GDS"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "segmentId"=>"GJIHgoSz7lP-yX5C"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"ABiknAeC9gYUwx/rrNx7beE0gC08VqaAwtapgSOM9R4E", "segmentId"=>"GwE+tP-0Sa5KkoTj"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "segmentId"=>"GbxJLqyQsqbYzotL"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"Awd3L/pxIC8dH6y9+OywzwCpaqiU6N8JVmWVnqGlSB0A", "segmentId"=>"G+Oe2mNHX3l+9YzJ"}], "baseFareTotal"=>"GBP149.00", "saleFareTotal"=>"GBP149.00", "saleTaxTotal"=>"GBP174.84", "saleTotal"=>"GBP323.84", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP24.60"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP42.70"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YR_I", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YR", "salePrice"=>"GBP40.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP13.92"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP18.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LGW EI X/DUB 48.11RUK26GDS EI AMS 87.67EOW17GDS EI X/DUB 26.72WEUOW17G EI LGW 25.66ZOW26GDS NUC 188.16 END ROE 0.789732 FARE GBP 149.00 XT 13.00GB 12.72UB 24.60UP 9.10CJ 18.80RN 56.62YQ 40.00YR", "latestTicketingTime"=>"2017-01-22T16:01-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP330.04", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00E", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>365, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"EI", "number"=>"231"}, "id"=>"GbxJLqyQsqbYzotL", "cabin"=>"COACH", "bookingCode"=>"R", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LAxFn7qdXdc4+wMS", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:10+00:00", "departureTime"=>"2017-01-25T08:50+00:00", "origin"=>"LGW", "destination"=>"DUB", "originTerminal"=>"S", "destinationTerminal"=>"2", "duration"=>80, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>175}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>110, "flight"=>{"carrier"=>"EI", "number"=>"608"}, "id"=>"GJIHgoSz7lP-yX5C", "cabin"=>"COACH", "bookingCode"=>"E", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LmKGKTqx14lyaV+F", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T15:55+01:00", "departureTime"=>"2017-01-25T13:05+00:00", "origin"=>"DUB", "destination"=>"AMS", "originTerminal"=>"2", "duration"=>110, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>410, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"EI", "number"=>"607"}, "id"=>"GdTdemhGyFim6ssE", "cabin"=>"COACH", "bookingCode"=>"R", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LJhUv+YfsXRAYruK", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T15:15+00:00", "departureTime"=>"2017-02-10T14:35+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>225}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"EI", "number"=>"248"}, "id"=>"GEg8D7epft5zu-fE", "cabin"=>"COACH", "bookingCode"=>"W", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"3", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LH4O+7ei1+8Jovph", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T20:25+00:00", "departureTime"=>"2017-02-10T19:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "carrier"=>"EI", "origin"=>"LON", "destination"=>"DUB", "basisCode"=>"RUK26GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"AMS", "basisCode"=>"EOW17GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AfF88lqh9cXTyHL33t7F+J8srN6SYeFYzplXsAW3anbw", "carrier"=>"EI", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"REUOW17G"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AIWrDGx4B6yYEovbmuo8szlvbCaKG++DSJVZwxnSnD5M", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"WOW26GDS"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "segmentId"=>"GJIHgoSz7lP-yX5C"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "segmentId"=>"GbxJLqyQsqbYzotL"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AIWrDGx4B6yYEovbmuo8szlvbCaKG++DSJVZwxnSnD5M", "segmentId"=>"GEg8D7epft5zu-fE"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AfF88lqh9cXTyHL33t7F+J8srN6SYeFYzplXsAW3anbw", "segmentId"=>"GdTdemhGyFim6ssE"}], "baseFareTotal"=>"GBP160.00", "saleFareTotal"=>"GBP160.00", "saleTaxTotal"=>"GBP170.04", "saleTotal"=>"GBP330.04", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP19.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP42.70"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YR_I", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YR", "salePrice"=>"GBP40.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP13.92"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP18.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LGW EI X/DUB 48.11RUK26GDS EI AMS 87.67EOW17GDS EI X/DUB 33.14REUOW17G EI LGW 33.14WOW26GDS NUC 202.06 END ROE 0.789732 FARE GBP 160.00 XT 13.00GB 12.72UB 19.80UP 9.10CJ 18.80RN 56.62YQ 40.00YR", "latestTicketingTime"=>"2017-01-22T16:01-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP365.04", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00H", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>365, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"EI", "number"=>"231"}, "id"=>"GbxJLqyQsqbYzotL", "cabin"=>"COACH", "bookingCode"=>"R", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LAxFn7qdXdc4+wMS", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:10+00:00", "departureTime"=>"2017-01-25T08:50+00:00", "origin"=>"LGW", "destination"=>"DUB", "originTerminal"=>"S", "destinationTerminal"=>"2", "duration"=>80, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>175}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>110, "flight"=>{"carrier"=>"EI", "number"=>"608"}, "id"=>"GJIHgoSz7lP-yX5C", "cabin"=>"COACH", "bookingCode"=>"E", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LmKGKTqx14lyaV+F", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T15:55+01:00", "departureTime"=>"2017-01-25T13:05+00:00", "origin"=>"DUB", "destination"=>"AMS", "originTerminal"=>"2", "duration"=>110, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>465, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"EI", "number"=>"603"}, "id"=>"GDrIwKZsdMT+wFU3", "cabin"=>"COACH", "bookingCode"=>"E", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"La0kL1-quIBvbabc", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T10:20+00:00", "departureTime"=>"2017-02-10T09:40+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>280}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"EI", "number"=>"240"}, "id"=>"GFKGbeUgZV9JT7B1", "cabin"=>"COACH", "bookingCode"=>"A", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"3", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"Ll+slATu5FAWPFdS", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T16:25+00:00", "departureTime"=>"2017-02-10T15:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "carrier"=>"EI", "origin"=>"LON", "destination"=>"DUB", "basisCode"=>"RUK26GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"AMS", "basisCode"=>"EOW17GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"ADhbfS4VNIE5D3VFQgukYp3axBjrDjTCVzpc8/wNahaQ", "carrier"=>"EI", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"EEUOW17G"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AQu3tZ6+RNoJzvqMPqtUf8h5INolMWr0dJAIKyx9Zuco", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"AOW26GDS"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "segmentId"=>"GJIHgoSz7lP-yX5C"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "segmentId"=>"GbxJLqyQsqbYzotL"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AQu3tZ6+RNoJzvqMPqtUf8h5INolMWr0dJAIKyx9Zuco", "segmentId"=>"GFKGbeUgZV9JT7B1"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"ADhbfS4VNIE5D3VFQgukYp3axBjrDjTCVzpc8/wNahaQ", "segmentId"=>"GDrIwKZsdMT+wFU3"}], "baseFareTotal"=>"GBP195.00", "saleFareTotal"=>"GBP195.00", "saleTaxTotal"=>"GBP170.04", "saleTotal"=>"GBP365.04", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP19.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP42.70"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YR_I", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YR", "salePrice"=>"GBP40.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP13.92"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP18.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LGW EI X/DUB 48.11RUK26GDS EI AMS 87.67EOW17GDS EI X/DUB 87.67EEUOW17G EI LGW 23.52AOW26GDS NUC 246.97 END ROE 0.789732 FARE GBP 195.00 XT 13.00GB 12.72UB 19.80UP 9.10CJ 18.80RN 56.62YQ 40.00YR", "latestTicketingTime"=>"2017-01-22T16:01-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP367.04", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00F", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>365, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"EI", "number"=>"231"}, "id"=>"GbxJLqyQsqbYzotL", "cabin"=>"COACH", "bookingCode"=>"R", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LAxFn7qdXdc4+wMS", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:10+00:00", "departureTime"=>"2017-01-25T08:50+00:00", "origin"=>"LGW", "destination"=>"DUB", "originTerminal"=>"S", "destinationTerminal"=>"2", "duration"=>80, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>175}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>110, "flight"=>{"carrier"=>"EI", "number"=>"608"}, "id"=>"GJIHgoSz7lP-yX5C", "cabin"=>"COACH", "bookingCode"=>"E", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LmKGKTqx14lyaV+F", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T15:55+01:00", "departureTime"=>"2017-01-25T13:05+00:00", "origin"=>"DUB", "destination"=>"AMS", "originTerminal"=>"2", "duration"=>110, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>335, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"EI", "number"=>"603"}, "id"=>"GDrIwKZsdMT+wFU3", "cabin"=>"COACH", "bookingCode"=>"E", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"La0kL1-quIBvbabc", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T10:20+00:00", "departureTime"=>"2017-02-10T09:40+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>150}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"EI", "number"=>"238"}, "id"=>"GJA-uy4QStVBcSKC", "cabin"=>"COACH", "bookingCode"=>"Z", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"3", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LDcywcO6BcZa+Uoj", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T14:15+00:00", "departureTime"=>"2017-02-10T12:50+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "carrier"=>"EI", "origin"=>"LON", "destination"=>"DUB", "basisCode"=>"RUK26GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"AMS", "basisCode"=>"EOW17GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"ADhbfS4VNIE5D3VFQgukYp3axBjrDjTCVzpc8/wNahaQ", "carrier"=>"EI", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"EEUOW17G"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"ABiknAeC9gYUwx/rrNx7beE0gC08VqaAwtapgSOM9R4E", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"ZOW26GDS"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "segmentId"=>"GJIHgoSz7lP-yX5C"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "segmentId"=>"GbxJLqyQsqbYzotL"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"ADhbfS4VNIE5D3VFQgukYp3axBjrDjTCVzpc8/wNahaQ", "segmentId"=>"GDrIwKZsdMT+wFU3"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"ABiknAeC9gYUwx/rrNx7beE0gC08VqaAwtapgSOM9R4E", "segmentId"=>"GJA-uy4QStVBcSKC"}], "baseFareTotal"=>"GBP197.00", "saleFareTotal"=>"GBP197.00", "saleTaxTotal"=>"GBP170.04", "saleTotal"=>"GBP367.04", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP19.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP42.70"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YR_I", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YR", "salePrice"=>"GBP40.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP13.92"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP18.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LGW EI X/DUB 48.11RUK26GDS EI AMS 87.67EOW17GDS EI X/DUB 87.67EEUOW17G EI LGW 25.66ZOW26GDS NUC 249.11 END ROE 0.789732 FARE GBP 197.00 XT 13.00GB 12.72UB 19.80UP 9.10CJ 18.80RN 56.62YQ 40.00YR", "latestTicketingTime"=>"2017-01-22T16:01-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP367.84", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00J", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>595, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"EI", "number"=>"231"}, "id"=>"GbxJLqyQsqbYzotL", "cabin"=>"COACH", "bookingCode"=>"R", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LAxFn7qdXdc4+wMS", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:10+00:00", "departureTime"=>"2017-01-25T08:50+00:00", "origin"=>"LGW", "destination"=>"DUB", "originTerminal"=>"S", "destinationTerminal"=>"2", "duration"=>80, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>410}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>105, "flight"=>{"carrier"=>"EI", "number"=>"610"}, "id"=>"G2l2Jk8PmXRmCB9N", "cabin"=>"COACH", "bookingCode"=>"F", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LKOOZmpI3+tE6cWi", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T19:45+01:00", "departureTime"=>"2017-01-25T17:00+00:00", "origin"=>"DUB", "destination"=>"AMS", "originTerminal"=>"2", "duration"=>105, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>385, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"EI", "number"=>"605"}, "id"=>"G+Oe2mNHX3l+9YzJ", "cabin"=>"COACH", "bookingCode"=>"W", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"La3mTtN+gh06xOgP", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T11:40+00:00", "departureTime"=>"2017-02-10T11:00+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>200}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"EI", "number"=>"240"}, "id"=>"GFKGbeUgZV9JT7B1", "cabin"=>"COACH", "bookingCode"=>"A", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"3", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"Ll+slATu5FAWPFdS", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T16:25+00:00", "departureTime"=>"2017-02-10T15:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "carrier"=>"EI", "origin"=>"LON", "destination"=>"DUB", "basisCode"=>"RUK26GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AWCRYZkknnSU7BV3jRXZ3zSBR7/cLY1d4wltG0EbXdHo", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"AMS", "basisCode"=>"FOW26GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"Awd3L/pxIC8dH6y9+OywzwCpaqiU6N8JVmWVnqGlSB0A", "carrier"=>"EI", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"WEUOW17G"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AQu3tZ6+RNoJzvqMPqtUf8h5INolMWr0dJAIKyx9Zuco", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"AOW26GDS"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "segmentId"=>"GbxJLqyQsqbYzotL"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AQu3tZ6+RNoJzvqMPqtUf8h5INolMWr0dJAIKyx9Zuco", "segmentId"=>"GFKGbeUgZV9JT7B1"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"Awd3L/pxIC8dH6y9+OywzwCpaqiU6N8JVmWVnqGlSB0A", "segmentId"=>"G+Oe2mNHX3l+9YzJ"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AWCRYZkknnSU7BV3jRXZ3zSBR7/cLY1d4wltG0EbXdHo", "segmentId"=>"G2l2Jk8PmXRmCB9N"}], "baseFareTotal"=>"GBP193.00", "saleFareTotal"=>"GBP193.00", "saleTaxTotal"=>"GBP174.84", "saleTotal"=>"GBP367.84", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP24.60"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP42.70"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YR_I", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YR", "salePrice"=>"GBP40.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP13.92"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP18.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LGW EI X/DUB 48.11RUK26GDS EI AMS 146.47FOW26GDS EI X/DUB 26.72WEUOW17G EI LGW 23.52AOW26GDS NUC 244.82 END ROE 0.789732 FARE GBP 193.00 XT 13.00GB 12.72UB 24.60UP 9.10CJ 18.80RN 56.62YQ 40.00YR", "latestTicketingTime"=>"2017-01-22T16:01-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP371.84", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00I", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>365, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"EI", "number"=>"231"}, "id"=>"GbxJLqyQsqbYzotL", "cabin"=>"COACH", "bookingCode"=>"R", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LAxFn7qdXdc4+wMS", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:10+00:00", "departureTime"=>"2017-01-25T08:50+00:00", "origin"=>"LGW", "destination"=>"DUB", "originTerminal"=>"S", "destinationTerminal"=>"2", "duration"=>80, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>175}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>110, "flight"=>{"carrier"=>"EI", "number"=>"608"}, "id"=>"GJIHgoSz7lP-yX5C", "cabin"=>"COACH", "bookingCode"=>"E", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LmKGKTqx14lyaV+F", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T15:55+01:00", "departureTime"=>"2017-01-25T13:05+00:00", "origin"=>"DUB", "destination"=>"AMS", "originTerminal"=>"2", "duration"=>110, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>585, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"EI", "number"=>"603"}, "id"=>"GDrIwKZsdMT+wFU3", "cabin"=>"COACH", "bookingCode"=>"E", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"La0kL1-quIBvbabc", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T10:20+00:00", "departureTime"=>"2017-02-10T09:40+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>400}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"EI", "number"=>"244"}, "id"=>"GwE+tP-0Sa5KkoTj", "cabin"=>"COACH", "bookingCode"=>"Z", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"3", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LP6oW49z0Rj+y8r1", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T18:25+00:00", "departureTime"=>"2017-02-10T17:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "carrier"=>"EI", "origin"=>"LON", "destination"=>"DUB", "basisCode"=>"RUK26GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"AMS", "basisCode"=>"EOW17GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"ADhbfS4VNIE5D3VFQgukYp3axBjrDjTCVzpc8/wNahaQ", "carrier"=>"EI", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"EEUOW17G"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"ABiknAeC9gYUwx/rrNx7beE0gC08VqaAwtapgSOM9R4E", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"ZOW26GDS"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AfCXz5nT+AbpktOHeAcXSsnQ3Ry/VL/OoTtdxyFBbwzs", "segmentId"=>"GJIHgoSz7lP-yX5C"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"ABiknAeC9gYUwx/rrNx7beE0gC08VqaAwtapgSOM9R4E", "segmentId"=>"GwE+tP-0Sa5KkoTj"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "segmentId"=>"GbxJLqyQsqbYzotL"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"ADhbfS4VNIE5D3VFQgukYp3axBjrDjTCVzpc8/wNahaQ", "segmentId"=>"GDrIwKZsdMT+wFU3"}], "baseFareTotal"=>"GBP197.00", "saleFareTotal"=>"GBP197.00", "saleTaxTotal"=>"GBP174.84", "saleTotal"=>"GBP371.84", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP24.60"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP42.70"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YR_I", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YR", "salePrice"=>"GBP40.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP13.92"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP18.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LGW EI X/DUB 48.11RUK26GDS EI AMS 87.67EOW17GDS EI X/DUB 87.67EEUOW17G EI LGW 25.66ZOW26GDS NUC 249.11 END ROE 0.789732 FARE GBP 197.00 XT 13.00GB 12.72UB 24.60UP 9.10CJ 18.80RN 56.62YQ 40.00YR", "latestTicketingTime"=>"2017-01-22T16:01-05:00", "ptc"=>"ADT"}]}, {"kind"=>"qpxexpress#tripOption", "saleTotal"=>"GBP380.84", "id"=>"QO8hXP39OK0R0Al3Qh7jCO00K", "slice"=>[{"kind"=>"qpxexpress#sliceInfo", "duration"=>595, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>80, "flight"=>{"carrier"=>"EI", "number"=>"231"}, "id"=>"GbxJLqyQsqbYzotL", "cabin"=>"COACH", "bookingCode"=>"R", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"0", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LAxFn7qdXdc4+wMS", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T10:10+00:00", "departureTime"=>"2017-01-25T08:50+00:00", "origin"=>"LGW", "destination"=>"DUB", "originTerminal"=>"S", "destinationTerminal"=>"2", "duration"=>80, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>410}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>105, "flight"=>{"carrier"=>"EI", "number"=>"610"}, "id"=>"G2l2Jk8PmXRmCB9N", "cabin"=>"COACH", "bookingCode"=>"F", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"1", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LKOOZmpI3+tE6cWi", "aircraft"=>"320", "arrivalTime"=>"2017-01-25T19:45+01:00", "departureTime"=>"2017-01-25T17:00+00:00", "origin"=>"DUB", "destination"=>"AMS", "originTerminal"=>"2", "duration"=>105, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}]}]}, {"kind"=>"qpxexpress#sliceInfo", "duration"=>410, "segment"=>[{"kind"=>"qpxexpress#segmentInfo", "duration"=>100, "flight"=>{"carrier"=>"EI", "number"=>"607"}, "id"=>"GdTdemhGyFim6ssE", "cabin"=>"COACH", "bookingCode"=>"R", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"2", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LJhUv+YfsXRAYruK", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T15:15+00:00", "departureTime"=>"2017-02-10T14:35+01:00", "origin"=>"AMS", "destination"=>"DUB", "destinationTerminal"=>"2", "duration"=>100, "mileage"=>465, "meal"=>"Food and Beverages for Purchase"}], "connectionDuration"=>225}, {"kind"=>"qpxexpress#segmentInfo", "duration"=>85, "flight"=>{"carrier"=>"EI", "number"=>"248"}, "id"=>"GEg8D7epft5zu-fE", "cabin"=>"COACH", "bookingCode"=>"W", "bookingCodeCount"=>4, "marriedSegmentGroup"=>"3", "leg"=>[{"kind"=>"qpxexpress#legInfo", "id"=>"LH4O+7ei1+8Jovph", "aircraft"=>"320", "arrivalTime"=>"2017-02-10T20:25+00:00", "departureTime"=>"2017-02-10T19:00+00:00", "origin"=>"DUB", "destination"=>"LGW", "originTerminal"=>"2", "destinationTerminal"=>"S", "duration"=>85, "mileage"=>300, "meal"=>"Food and Beverages for Purchase"}]}]}], "pricing"=>[{"kind"=>"qpxexpress#pricingInfo", "fare"=>[{"kind"=>"qpxexpress#fareInfo", "id"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "carrier"=>"EI", "origin"=>"LON", "destination"=>"DUB", "basisCode"=>"RUK26GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AWCRYZkknnSU7BV3jRXZ3zSBR7/cLY1d4wltG0EbXdHo", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"AMS", "basisCode"=>"FOW26GDS"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AfF88lqh9cXTyHL33t7F+J8srN6SYeFYzplXsAW3anbw", "carrier"=>"EI", "origin"=>"AMS", "destination"=>"DUB", "basisCode"=>"REUOW17G"}, {"kind"=>"qpxexpress#fareInfo", "id"=>"AIWrDGx4B6yYEovbmuo8szlvbCaKG++DSJVZwxnSnD5M", "carrier"=>"EI", "origin"=>"DUB", "destination"=>"LON", "basisCode"=>"WOW26GDS"}], "segmentPricing"=>[{"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AueFjiXU4BNcZt6hXoJcAmqbstEPHLaAeMCITO5qOBAg", "segmentId"=>"GbxJLqyQsqbYzotL"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AIWrDGx4B6yYEovbmuo8szlvbCaKG++DSJVZwxnSnD5M", "segmentId"=>"GEg8D7epft5zu-fE"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AWCRYZkknnSU7BV3jRXZ3zSBR7/cLY1d4wltG0EbXdHo", "segmentId"=>"G2l2Jk8PmXRmCB9N"}, {"kind"=>"qpxexpress#segmentPricing", "fareId"=>"AfF88lqh9cXTyHL33t7F+J8srN6SYeFYzplXsAW3anbw", "segmentId"=>"GdTdemhGyFim6ssE"}], "baseFareTotal"=>"GBP206.00", "saleFareTotal"=>"GBP206.00", "saleTaxTotal"=>"GBP174.84", "saleTotal"=>"GBP380.84", "passengers"=>{"kind"=>"qpxexpress#passengerCounts", "adultCount"=>1}, "tax"=>[{"kind"=>"qpxexpress#taxInfo", "id"=>"UP_001", "chargeType"=>"GOVERNMENT", "code"=>"UP", "country"=>"IE", "salePrice"=>"GBP24.60"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP42.70"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YR_I", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YR", "salePrice"=>"GBP40.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"GB_001", "chargeType"=>"GOVERNMENT", "code"=>"GB", "country"=>"GB", "salePrice"=>"GBP13.00"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"UB_001", "chargeType"=>"GOVERNMENT", "code"=>"UB", "country"=>"GB", "salePrice"=>"GBP12.72"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"YQ_F", "chargeType"=>"CARRIER_SURCHARGE", "code"=>"YQ", "salePrice"=>"GBP13.92"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"RN_001", "chargeType"=>"GOVERNMENT", "code"=>"RN", "country"=>"NL", "salePrice"=>"GBP18.80"}, {"kind"=>"qpxexpress#taxInfo", "id"=>"CJ_001", "chargeType"=>"GOVERNMENT", "code"=>"CJ", "country"=>"NL", "salePrice"=>"GBP9.10"}], "fareCalculation"=>"LGW EI X/DUB 48.11RUK26GDS EI AMS 146.47FOW26GDS EI X/DUB 33.14REUOW17G EI LGW 33.14WOW26GDS NUC 260.86 END ROE 0.789732 FARE GBP 206.00 XT 13.00GB 12.72UB 24.60UP 9.10CJ 18.80RN 56.62YQ 40.00YR", "latestTicketingTime"=>"2017-01-22T16:01-05:00", "ptc"=>"ADT"}]}]}}.to_json
                
        end

              @response = JSON.parse(@httprequest) 
              
          if @response != nil && @response["trips"]["data"]["airport"] != nil &&  @response["trips"]["data"]["aircraft"] != nil && @response["trips"]["data"]["carrier"] != nil
            @airport = Hash.new 
            @aircraft = Hash.new 
            @carrier = Hash.new 
            @city = Hash.new 
            @tax = Hash.new   
            @response["trips"]["data"]["airport"].each do |a|
            @airport.store(a["code"], a["name"])
            end 
            @response["trips"]["data"]["aircraft"].each do |a|
            @aircraft.store(a["code"], a["name"])
            end 
            @response["trips"]["data"]["carrier"].each do |c|
            @carrier.store(c["code"], c["name"])
            end 
            @response["trips"]["data"]["city"].each do |c|
            @city.store(c["code"], c["name"])
            end
            @response["trips"]["data"]["tax"].each do |t|
            @tax.store(t["id"], t["name"])
            end 
            @baseprice = @response["trips"]["tripOption"][0]["saleTotal"][3..8]
        else
            @long_lat = Airport.where(iata: @origin).first
            lat = @long_lat["longitude_deg"]
            lng = @long_lat["latitude_deg"]
                    
                    
            @nearByOrigin = Airport.near(@origin, 20, :order => "distance")
            @nearByDestination = Airport.near(@destination, 20, :order => "distance")
            
              @response = Hash.new
              @response.store("origin", @nearByOrigin)
              @response.store("destination", @nearByDestination)
              
        end

              render json: @response
              }
        end
    end

    def show
         if @response != nil && @response["trips"]["data"]["airport"] != nil &&  @response["trips"]["data"]["aircraft"] != nil && @response["trips"]["data"]["carrier"] != nil
            @airport = Hash.new 
            @aircraft = Hash.new 
            @carrier = Hash.new 
            @city = Hash.new 
            @tax = Hash.new   
            @response["trips"]["data"]["airport"].each do |a|
            @airport.store(a["code"], a["name"])
            end 
            @response["trips"]["data"]["aircraft"].each do |a|
            @aircraft.store(a["code"], a["name"])
            end 
            @response["trips"]["data"]["carrier"].each do |c|
            @carrier.store(c["code"], c["name"])
            end 
            @response["trips"]["data"]["city"].each do |c|
            @city.store(c["code"], c["name"])
            end
            @response["trips"]["data"]["tax"].each do |t|
            @tax.store(t["id"], t["name"])
            end 
            @baseprice = @response["trips"]["tripOption"][0]["saleTotal"][3..8]
        else
            @long_lat = Airport.where(iata: @origin).first
            lat = @long_lat["longitude_deg"]
            lng = @long_lat["latitude_deg"]
                    
                    
            @test = Airport.near(@origin, 20, :order => "distance")
            @testt = Airport.near(@destination, 20, :order => "distance")
        end

        #@response_p = Kaminari.paginate_array(@response["trips"]["tripOption"], total_count: @response["trips"]["tripOption"].count).page(params[:page]).per(10)
    end
    def contact
        @airlines = Array.new;
        i = 0
        params[:iata].each do |x,y|
          @airlines[i] = Airline.where(iata:y).first
            i = i + 1
        end
    end
    
    def search
    end
end